[gd_scene load_steps=21 format=3 uid="uid://c0hw3mqvrs8pi"]

[ext_resource type="Script" path="res://scenes/player/player.gd" id="1_gq8pa"]
[ext_resource type="Script" path="res://scenes/player/smoothing_2D.gd" id="2_16obg"]
[ext_resource type="Texture2D" uid="uid://ir24xjmheu87" path="res://assets/animations/player/wizard_sheet.png" id="2_hewl8"]
[ext_resource type="Script" path="res://scenes/player/FSM.gd" id="3_vt03d"]
[ext_resource type="Script" path="res://scenes/player/idle.gd" id="4_5o0wn"]
[ext_resource type="Script" path="res://scenes/player/CameraTarget.gd" id="4_6i6kj"]
[ext_resource type="Script" path="res://scenes/player/Walk.gd" id="5_8lmm0"]
[ext_resource type="Script" path="res://scenes/player/Roll.gd" id="6_tdajf"]

[sub_resource type="Animation" id="Animation_5ywan"]
length = 0.001
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_phrcv"]
resource_name = "idle"
length = 0.500008
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [6, 7, 8, 9, 10, 11]
}

[sub_resource type="Animation" id="Animation_i17fh"]
resource_name = "roll_down"
length = 0.6
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [24, 25, 26, 27, 28, 29]
}

[sub_resource type="Animation" id="Animation_2ttbf"]
resource_name = "roll_left"
length = 0.6
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [36, 37, 38, 39, 40, 41]
}

[sub_resource type="Animation" id="Animation_evhov"]
resource_name = "roll_right"
length = 0.6
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [42, 43, 44, 45, 46, 47]
}

[sub_resource type="Animation" id="Animation_wvm61"]
resource_name = "roll_up"
length = 0.6
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [30, 31, 32, 33, 34, 35]
}

[sub_resource type="Animation" id="Animation_cveny"]
resource_name = "walk_down"
length = 0.6
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [6, 7, 8, 9, 10, 11]
}

[sub_resource type="Animation" id="Animation_c6qjf"]
resource_name = "walk_left"
length = 0.6
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [12, 13, 14, 15, 16, 17]
}

[sub_resource type="Animation" id="Animation_e4qae"]
resource_name = "walk_right"
length = 0.6
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [18, 19, 20, 21, 22, 23]
}

[sub_resource type="Animation" id="Animation_sboe2"]
resource_name = "walking"
length = 0.6
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoothing2D/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_v0ki0"]
_data = {
"RESET": SubResource("Animation_5ywan"),
"idle": SubResource("Animation_phrcv"),
"roll_down": SubResource("Animation_i17fh"),
"roll_left": SubResource("Animation_2ttbf"),
"roll_right": SubResource("Animation_evhov"),
"roll_up": SubResource("Animation_wvm61"),
"walk_down": SubResource("Animation_cveny"),
"walk_left": SubResource("Animation_c6qjf"),
"walk_right": SubResource("Animation_e4qae"),
"walk_up": SubResource("Animation_sboe2")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_4o18s"]
radius = 4.12311

[node name="player" type="CharacterBody2D" node_paths=PackedStringArray("animations", "state_machine")]
collision_layer = 8
collision_mask = 3
motion_mode = 1
wall_min_slide_angle = 0.0
script = ExtResource("1_gq8pa")
animations = NodePath("AnimationPlayer")
state_machine = NodePath("FSM")
max_speed = 60.0
acceleration = 20.0

[node name="Smoothing2D" type="Node2D" parent="."]
script = ExtResource("2_16obg")

[node name="Sprite2D" type="Sprite2D" parent="Smoothing2D"]
texture = ExtResource("2_hewl8")
hframes = 48

[node name="CameraTarget" type="Node2D" parent="Smoothing2D"]
script = ExtResource("4_6i6kj")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_v0ki0")
}

[node name="FSM" type="Node" parent="." node_paths=PackedStringArray("initial_state", "parent")]
script = ExtResource("3_vt03d")
initial_state = NodePath("Idle")
parent = NodePath("..")

[node name="Idle" type="Node" parent="FSM" node_paths=PackedStringArray("animation", "walk_state", "roll_state")]
script = ExtResource("4_5o0wn")
animation = NodePath("../../AnimationPlayer")
walk_state = NodePath("../Walk")
roll_state = NodePath("../Roll")

[node name="Walk" type="Node" parent="FSM" node_paths=PackedStringArray("animation", "idle_state", "roll_state")]
script = ExtResource("5_8lmm0")
animation = NodePath("../../AnimationPlayer")
idle_state = NodePath("../Idle")
roll_state = NodePath("../Roll")
max_speed = 50.0

[node name="Roll" type="Node" parent="FSM" node_paths=PackedStringArray("animation", "walk_state", "idle_state")]
script = ExtResource("6_tdajf")
animation = NodePath("../../AnimationPlayer")
walk_state = NodePath("../Walk")
idle_state = NodePath("../Idle")

[node name="Camera2D" type="Camera2D" parent="."]

[node name="collision" type="CollisionShape2D" parent="."]
position = Vector2(0, 3)
shape = SubResource("CircleShape2D_4o18s")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[connection signal="animation_finished" from="AnimationPlayer" to="FSM/Roll" method="_on_animation_player_animation_finished"]
